# 闪回

## 实验介绍

### 实验内容



### 实验知识点

+ ​


《OCP 12c》 26章

《OCP 11g》 19章

《深入理解oracle 12c》19.9



## 闪回技术



## 闪回数据库



### 配置闪回数据库



### 监视闪回数据库



### 使用闪回数据库



## 闪回表



### 将表内容还原到过去某一时间点



### 闪回已经删除的表



## 闪回查询



### 闪回表查询



### 闪回版本查询



### 闪回事务查询



## 闪回删除

















闪回操作也就是一个恢复操作，当我们不小心使用 `drop table` 删除了一张表的时候，实际上和 windows 删除文件类似，这个表被放到了回收站中，并且为了标记出回收站的内容不是空的，会在表的数据字典中生成 `BIN$` 开头的内容。我们可以使用闪回闪回技术 `FLASHBACK` 进行恢复。

### 查看回收站内容

```sql
SQL> show recyclebin;
select * from user_recyclebin;
```

> 注意：
>
> - 回收站功能是默认启用的，如果想要修改，可以设置初始参数 `RECYCLEBIN` 的值为 `OFF` 。不建议把回收站功能关掉。
> - `SYSTEM` 表空间没有回收站功能。

### 闪回某表

也就是恢复某表。使用如下语法：

```sql
SQL> flashback table <table name> to before drop;
```

### 彻底删除某表

语法：

```sql
SQL> drop table <table name> purge;
```

> 彻底删除过后，表所占用的资源会被全部释放。

### 清空回收站

清空当前用户回收站，语法：

```sql
SQL> purge recyclebin;
```

清空所有用户回收站，语法：

```sql
SQL> purge dba_recyclebin;
```

> 注意：需要 DBA 权限。

想了解更多可参考 [FLASHBACK TABLE](https://docs.oracle.com/en/database/oracle/oracle-database/12.2/sqlrf/FLASHBACK-TABLE.html#GUID-FA9AF2FD-2DAD-4387-9E62-14AFC26EA85C)













## 总结

